<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>‚úåyesplease's blog</title><link>http://cugbtang.github.io/</link><description>Recent content on ‚úåyesplease's blog</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Thu, 01 Mar 2018 16:01:23 +0800</lastBuildDate><atom:link href="http://cugbtang.github.io/index.xml" rel="self" type="application/rss+xml"/><item><title>About</title><link>http://cugbtang.github.io/about/</link><pubDate>Sun, 20 Aug 2017 21:38:52 +0800</pubDate><guid>http://cugbtang.github.io/about/</guid><description>&lt;p>Hugo is a static site engine written in Go.&lt;/p>
&lt;p>It makes use of a variety of open source projects including:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/spf13/cobra">Cobra&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/spf13/viper">Viper&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/spf13/jWalterWeatherman">J Walter Weatherman&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/spf13/cast">Cast&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>Learn more and contribute on &lt;a href="https://github.com/gohugoio">GitHub&lt;/a>.&lt;/p></description></item><item><title>Jenkins, how to play?</title><link>http://cugbtang.github.io/post/series-1-jenkins/</link><pubDate>Thu, 01 Mar 2018 16:01:23 +0800</pubDate><guid>http://cugbtang.github.io/post/series-1-jenkins/</guid><description>&lt;h1 id="how-to-play-jenkins">how to play jenkins?&lt;/h1>
&lt;blockquote>
&lt;p>Á§æÂå∫Ê∫êÁ†Å„ÄÅÊñáÊ°£&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>Á≠âÊâòÁÆ°Âú® GitHub ‰∏ä„ÄÇ&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>ÂÖ∂‰∏≠Âü∫Á°ÄËÆæÊñΩÈÉ®ÂàÜÂú® &lt;a href="https://github.com/jenkins-infra">&lt;code>jenkins-infra&lt;/code>&lt;/a>Ôºõ&lt;/p>
&lt;p>Ê†∏ÂøÉÂ∫ì‰ª•ÂèäÊèí‰ª∂Âú® &lt;a href="https://github.com/jenkinsci/">&lt;code>jenkinsci&lt;/code>&lt;/a>&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>Ôºõ&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>Jenkins ‰∏≠ÊñáÊú¨Âú∞ÂåñÁõ∏ÂÖ≥ÁöÑÈ°πÁõÆÂú® &lt;a href="https://github.com/jenkins-zh">&lt;code>jenkins-zh&lt;/code>&lt;/a>&lt;/p>
&lt;p>ÈõÜ‰∏≠Áé©ËÄçÂú∞Âú∞Êñπ&lt;sup id="fnref:3">&lt;a href="#fn:3" class="footnote-ref" role="doc-noteref">3&lt;/a>&lt;/sup>&lt;/p>
&lt;/blockquote>
&lt;h2 id="ÊêúÈõÜÁé©Ê≥ï">ÊêúÈõÜÁé©Ê≥ï&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>1„ÄÅÂÆòÊñπÂª∫ËÆÆÂÆπÂô®ÂåñÈÉ®ÁΩ≤Ôºàdocker/kubernetesÔºâ&lt;/p>
&lt;blockquote>
&lt;p>Âª∫ËÆÆ‰ΩøÁî®ÁöÑDockerÊò†ÂÉèÊòØ&lt;a href="https://hub.docker.com/r/jenkinsci/blueocean/">&lt;code>jenkinsci/blueocean&lt;/code> image&lt;/a>(Êù•Ëá™ the &lt;a href="https://hub.docker.com/">Docker Hub repository&lt;/a>)„ÄÇ ËØ•ÈïúÂÉèÂåÖÂê´ÂΩìÂâçÁöÑ&lt;a href="https://www.jenkins.io/download">ÈïøÊúüÊîØÊåÅ (LTS) ÁöÑJenkinsÁâàÊú¨&lt;/a> ÔºàÂèØ‰ª•ÊäïÂÖ•‰ΩøÁî®Ôºâ ÔºåÊçÜÁªë‰∫ÜÊâÄÊúâBlue OceanÊèí‰ª∂ÂíåÂäüËÉΩ„ÄÇËøôÊÑèÂë≥ÁùÄ‰Ω†‰∏çÈúÄË¶ÅÂçïÁã¨ÂÆâË£ÖBlue OceanÊèí‰ª∂„ÄÇ&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">docker run &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -u root &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --rm &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -d &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -p 8080:8080 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -p 50000:50000 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -v jenkins-data:/var/jenkins_home &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -v /var/run/docker.sock:/var/run/docker.sock &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> jenkinsci/blueocean
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ËÉΩÁé©‰∏ÄÊÆµÊó∂Èó¥‰∫Ü„ÄÇ„ÄÇ„ÄÇ&lt;/p>
&lt;/li>
&lt;li>
&lt;p>2„ÄÅÂâçÈù¢ÈÉΩÊòØÈì∫Âû´ÔºåÁé©‰∫Ü‰∏ÄÊÆµÊó∂Èó¥ÔºåÂèëÁé∞ÂéüÁîüÈïúÂÉè‰∏≠Áº∫ËøôÂ∞ëÈÇ£ÁöÑÔºåÂ∞§ÂÖ∂ÊòØÊèí‰ª∂ÔºåÁúãÁúã&lt;strong>ÂÆòÊñπ&lt;/strong>ÊÄé‰πàËØ¥Ôºö&lt;/p>
&lt;blockquote>
&lt;p>Keep in mind that the process described above will automatically download the official Jenkins Docker image if this hasn‚Äôt been done before.&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>
&lt;p>Create Dockerfile with the following content:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">FROM jenkinsci/blueocean
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">USER root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">RUN apt-get update &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> apt-get install -y lsb-release
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">RUN curl -fsSLo /usr/share/keyrings/docker-archive-keyring.asc &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> https://download.docker.com/linux/debian/gpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">RUN &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;deb [arch=&lt;/span>&lt;span class="k">$(&lt;/span>dpkg --print-architecture&lt;span class="k">)&lt;/span>&lt;span class="s2"> \
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> signed-by=/usr/share/keyrings/docker-archive-keyring.asc] \
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> https://download.docker.com/linux/debian \
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &lt;/span>&lt;span class="k">$(&lt;/span>lsb_release -cs&lt;span class="k">)&lt;/span>&lt;span class="s2"> stable&amp;#34;&lt;/span> &amp;gt; /etc/apt/sources.list.d/docker.list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">RUN apt-get update &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> apt-get install -y docker-ce-cli
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">USER jenkins
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">RUN jenkins-plugin-cli --plugins &lt;span class="s2">&amp;#34;blueocean:1.25.3 docker-workflow:1.28&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Build a new docker image from this Dockerfile and assign the image a meaningful name, e.g. &amp;ldquo;myjenkins-blueocean:2.319.3-1&amp;rdquo;:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">docker build -t myjenkins-blueocean:2.319.3-1 .
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>3„ÄÅÂêåÊó∂Ôºå‰πüÂèØ‰ª•Á´ôÂú®Â∑®‰∫∫ÁöÑËÇ©ËÜÄ‰∏äÔºåÊúâ‰∏Ä‰∫õÂÆûË∑µËÄÖÊää&lt;strong>Â∏∏Áî®ÁöÑÊèí‰ª∂&lt;/strong>Â∑≤ÁªèÂÜÖÁΩÆÂà∞ÈïúÂÉèÂèëÂ∏É‰∫ÜÔºåÊØîÂ¶Ç &lt;code>kubespheredev/ks-jenkins&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>4„ÄÅÁ®ãÂ∫èÂëòÁî®ÁïåÈù¢ÔºüÂëΩ‰ª§Ë°åËµ∑È£û&lt;/p>
&lt;blockquote>
&lt;p>&lt;a href="https://www.jenkins.io/zh/blog/2019/08/30/jenkins-cli/">Âà©Áî® jcli ÁÆ°ÁêÜ Jenkins&lt;/a>&lt;/p>
&lt;p>vs&lt;/p>
&lt;p>&lt;a href="https://www.jenkins.io/doc/book/managing/cli/">ÂéüÁîüJenkins CLI &lt;/a>&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ‰æãÂ¶ÇÔºåÊú¨Âú∞ÊïèÊç∑Ë∞ÉËØï&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ÂÆâË£Ö&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wget -q https://ghproxy.com/https://github.com/jenkins-zh/jenkins-cli/releases/latest/download/jcli-linux-amd64.tar.gz&lt;span class="p">|&lt;/span>tar -zxvf &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> sudo mv jcli /usr/local/bin/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ÈÖçÁΩÆ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">jcli config gen
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ÈÉΩËµ∞ÈªòËÆ§Â∞±üÜó&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ÂêØÂä®&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">jcli center start -m docker --image kubespheredev/ks-jenkins --version 2.249.1 --c-user root --port &lt;span class="m">8080&lt;/span> --setup-wizard&lt;span class="o">=&lt;/span>&lt;span class="nb">false&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>5„ÄÅÂõΩÂÜÖÊèí‰ª∂Ê∫ê&lt;/p>
&lt;blockquote>
&lt;p>&lt;code>https://updates.jenkins-zh.cn/update-center.json&lt;/code>&lt;/p>
&lt;/blockquote>
&lt;/li>
&lt;li>
&lt;p>6„ÄÅÂàíÈáçÁÇπÔºåÂ∞±ÊòØ &lt;strong>pipeline&lt;/strong>ÔºàÂâçÈù¢ÁöÑÊèí‰ª∂Â∑≤ÁªèÈì∫Âû´ËøáÔºâ„ÄÇwhatÔºüÔºüÔºü&lt;/p>
&lt;blockquote>
&lt;h4 id="pipeline--ÊåÅÁª≠‰∫§‰ªòÂç≥‰ª£Á†Å">pipeline ==~ ‚ÄúÊåÅÁª≠‰∫§‰ªòÂç≥‰ª£Á†Å‚Äù&lt;/h4>
&lt;p>Jenkins Pipeline ÁöÑÂÆö‰πâÈÄöÂ∏∏Ë¢´ÂÜôÂÖ•Âà∞‰∏Ä‰∏™ÊñáÊú¨Êñá‰ª∂ÔºàÁß∞‰∏∫ &lt;code>Jenkinsfile&lt;/code> Ôºâ‰∏≠ÔºåËØ•Êñá‰ª∂ÂèØ‰ª•Ë¢´ÊîæÂÖ•È°πÁõÆÁöÑÊ∫ê‰ª£Á†ÅÊéßÂà∂Â∫ì‰∏≠„ÄÇ&lt;/p>
&lt;p>official recommended how to play: &lt;strong>all in Jenkinsfile!!!&lt;/strong>&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>&lt;a href="https://www.jenkins.io/doc/book/pipeline/getting-started">get started with Pipeline&lt;/a> - covers how to &lt;a href="https://www.jenkins.io/doc/book/pipeline/getting-started#defining-a-pipeline">define a Jenkins Pipeline&lt;/a> (i.e. your &lt;code>Pipeline&lt;/code>) through &lt;a href="https://www.jenkins.io/doc/book/pipeline/getting-started#through-blue-ocean">Blue Ocean&lt;/a>, through the &lt;a href="https://www.jenkins.io/doc/book/pipeline/getting-started#through-the-classic-ui">classic UI&lt;/a> or in &lt;a href="https://www.jenkins.io/doc/book/pipeline/getting-started#defining-a-pipeline-in-scm">SCM&lt;/a>,&lt;/li>
&lt;li>&lt;a href="https://www.jenkins.io/doc/book/pipeline/jenkinsfile">create and use a &lt;code>Jenkinsfile&lt;/code>&lt;/a> - covers use-case scenarios on how to craft and construct your &lt;code>Jenkinsfile&lt;/code>,&lt;/li>
&lt;li>work with &lt;a href="https://www.jenkins.io/doc/book/pipeline/multibranch">branches and pull requests&lt;/a>,&lt;/li>
&lt;li>&lt;a href="https://www.jenkins.io/doc/book/pipeline/docker">use Docker with Pipeline&lt;/a> - covers how Jenkins can invoke Docker containers on agents/nodes (from a &lt;code>Jenkinsfile&lt;/code>) to build your Pipeline projects,&lt;/li>
&lt;li>&lt;a href="https://www.jenkins.io/doc/book/pipeline/shared-libraries">extend Pipeline with shared libraries&lt;/a>,&lt;/li>
&lt;li>use different &lt;a href="https://www.jenkins.io/doc/book/pipeline/development">development tools&lt;/a> to facilitate the creation of your Pipeline, and&lt;/li>
&lt;li>work with &lt;a href="https://www.jenkins.io/doc/book/pipeline/syntax">Pipeline syntax&lt;/a> - this page is a comprehensive reference of all Declarative Pipeline syntax.&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>ÔºàÁâáÊÆµÁîüÊàêÂô®+Â£∞ÊòéÂºè+„ÄÇ„ÄÇ„ÄÇÂèçÊ≠£Â∞±ÊòØÁîüÊàêÔºâhttps://jenkinsÂú∞ÂùÄ/job/test/pipeline-syntax/&lt;/p>
&lt;ul>
&lt;li>&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>&lt;a href="https://www.jenkins.io/doc/book/pipeline/">„ÄêÂÆòÊñπËØçÂÖ∏„Äë&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="https://raw.githubusercontent.com/cugbtang/image-repo/master/PicGo/20220302150355.png" alt="image-20220302150354810">&lt;/p>
&lt;ul>
&lt;li>
&lt;p>7„ÄÅ&lt;strong>ÂÆòÊñπ&lt;/strong>ÊääÊû∂Â≠êÊâìÂ•Ω‰∫ÜÔºåËÆ©Êàë‰ª¨ÂèëÊå•ÊòØÂêßÔºåÈÇ£ÊúâÊú®ÊúâÂâçËæàÁ¥ØËÆ°ÁöÑÊ®°ÊùøÔºåÊàñËÄÖÊàëÊúâÊñ∞È¢ñÁöÑ‰ΩøÁî®ÊñπÂºèÊñπÊ≥ïÊÉ≥ÂàÜ‰∫´ÁªôÂ§ßÂÆ∂Âë¢Ôºö&lt;/p>
&lt;blockquote>
&lt;p>enjoy your play:&lt;/p>
&lt;/blockquote>
&lt;p>&lt;a href="https://github.com/jenkinsci/pipeline-examples">„ÄêÂÆòÊñπ‰æãÂ≠ê„Äë&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://github.com/devops-ws">„ÄêDevOps Workspace„Äë&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>8„ÄÅÂèàÁé©‰∫Ü‰∏ÄÊÆµÊó∂Èó¥ÔºåÂèëÁé∞jenkinsÊúÄÂ•ΩÊòØ‰Ωú‰∏∫Ëá™Âä®ÂåñÁöÑÂºïÊìéÔºåÈÄöËøáÊé•Âè£ÈõÜÊàêÂà∞ PASS ‰∏ä„ÄÇ&lt;/p>
&lt;blockquote>
&lt;p>Use Pipeline through API&lt;/p>
&lt;/blockquote>
&lt;p>&lt;a href="https://github.com/go-atomci/workflow">one example&lt;/a>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="ÈÉΩÂú®Áé©ÂÑøplugin">ÈÉΩÂú®Áé©ÂÑøplugin&lt;/h2>
&lt;ul>
&lt;li>Jenkins Configuration as Code&lt;sup id="fnref:4">&lt;a href="#fn:4" class="footnote-ref" role="doc-noteref">4&lt;/a>&lt;/sup>&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>ËôΩÁÑ∂Êñ∞ÈÉ®ÁΩ≤ÁöÑ Jenkins ÂÆû‰æãËá™Âä®‰∏∫Êàë‰ª¨ÂÆâË£Ö‰∫ÜÊâÄÊúâÊâÄÈúÄÁöÑÊèí‰ª∂ÔºåÂπ∂ÈÖçÁΩÆÂ•Ω‰∫ÜÂàùÂßãÂåñ Job Á≠âÂ∑•‰ΩúÔºå‰ΩÜÂú®ÂºÄÂßã‰ΩøÁî®ÂÆÉ‰πãÂâçÔºåÊàë‰ª¨‰ªçÈúÄË¶ÅÂÆåÊàê‰∏ÄÁ≥ªÂàóÊâãÂä®Â∑•‰ΩúÔºåÂ¶ÇÈÖçÁΩÆ Jenkins ÁöÑ ‚ÄúConfigure System‚Äù È°µÈù¢&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>Â¶ÇÊûú‰Ω†ÊòØ‰∏ÄÂêç Jenkins ÁÆ°ÁêÜÂëòÔºåÈÇ£‰πà‰Ω†‰∏ÄÂÆö‰∏ç‰ºöÂØπËøô‰∏™È°µÈù¢ÊÑüÂà∞ÈôåÁîüÔºåÊØèÊ¨°ÈÉ®ÁΩ≤ÂÆå‰∏Ä‰∏™Êñ∞ÁöÑ Jenkins ÂÆû‰æãÔºåÂú®ÂèØ‰ª•‰ΩøÁî®‰πãÂâçÔºåÊàë‰ª¨ÂæÄÂæÄÈÉΩÈúÄË¶ÅÂú®ËØ•È°µÈù¢‰ΩúÂá∫‰∏Ä‰∫õÁõ∏Â∫îÁöÑÈÖçÁΩÆ„ÄÇËØ•È°µÈù¢Èô§‰∫ÜÂåÖÂê´ Jenkins Ëá™Ë∫´ÁöÑ‰∏Ä‰∫õÂü∫Êú¨ÈÖçÁΩÆ‰ø°ÊÅØÂ§ñÔºåÂêåÊó∂ËøòÂåÖÊã¨‰∫ÜÂΩìÂâçÁ≥ªÁªü‰∏≠ÊâÄÂÆâË£ÖÁöÑÊèí‰ª∂ÁöÑÈÖçÁΩÆ‰ø°ÊÅØ„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÂΩì‰Ω†ÁöÑ Jenkins ÂÆâË£ÖÁöÑÊèí‰ª∂Ë∂äÂ§öÔºåËØ•È°µÈù¢ÁöÑÈÖçÁΩÆÈ°πÂ∞±ÊúâÂèØËÉΩ‰ºöË∂äÂ§ö„ÄÇ&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="l">‰∫ëÊó∂‰ª£ Ëøô‰∏™Êèí‰ª∂Áî®Â§ÑÂ∞±Â∞ë‰∫õ‰∫ÜÔºåÊâÄÊúâÁöÑÈÖçÁΩÆÈÉΩÊîæÂú®&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;section class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1" role="doc-endnote">
&lt;p>&lt;a href="https://github.com/jenkins-zh/jenkins-zh/wiki">https://github.com/jenkins-zh/jenkins-zh/wiki&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2" role="doc-endnote">
&lt;p>&lt;a href="https://github.com/jenkinsci/">https://github.com/jenkinsci/&lt;/a>&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:3" role="doc-endnote">
&lt;p>&lt;a href="https://github.com/jenkins-zh/jenkins-zh/issues">https://github.com/jenkins-zh/jenkins-zh/issues&lt;/a>&amp;#160;&lt;a href="#fnref:3" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:4" role="doc-endnote">
&lt;p>&lt;a href="https://github.com/jenkinsci/configuration-as-code-plugin/tree/master/demos">https://github.com/jenkinsci/configuration-as-code-plugin/tree/master/demos&lt;/a>&amp;#160;&lt;a href="#fnref:4" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/section></description></item><item><title>namespace„ÄÅcgroups„ÄÅlayerfs support container</title><link>http://cugbtang.github.io/post/namespace-cgroups-layerfs/</link><pubDate>Thu, 01 Mar 2018 16:01:23 +0800</pubDate><guid>http://cugbtang.github.io/post/namespace-cgroups-layerfs/</guid><description>&lt;p>container technology become a necessary for developer during operating the linux system.&lt;/p>
&lt;h2 id="1namespace">1„ÄÅnamespace&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>ÂÆö‰πâ&lt;/p>
&lt;p>namespaceÊòØ Linux ÂÜÖÊ†∏ÁöÑ‰∏ÄÈ°πÂäüËÉΩÔºåËØ•ÂäüËÉΩÂØπÂÜÖÊ†∏ËµÑÊ∫êËøõË°åÂàÜÂå∫Ôºå‰ª•‰Ωø‰∏ÄÁªÑËøõÁ®ãÁúãÂà∞‰∏ÄÁªÑËµÑÊ∫êÔºåËÄåÂè¶‰∏ÄÁªÑËøõÁ®ãÁúãÂà∞Âè¶‰∏ÄÁªÑËµÑÊ∫ê„ÄÇnamespace ÁöÑÂ∑•‰ΩúÊñπÂºèÈÄöËøá‰∏∫‰∏ÄÁªÑËµÑÊ∫êÂíåËøõÁ®ãËÆæÁΩÆÁõ∏ÂêåÁöÑ namespace ËÄåËµ∑‰ΩúÁî®Ôºå‰ΩÜÊòØËøô‰∫õ namespace ÂºïÁî®‰∫Ü‰∏çÂêåÁöÑËµÑÊ∫ê„ÄÇËµÑÊ∫êÂèØËÉΩÂ≠òÂú®‰∫éÂ§ö‰∏™ namespace ‰∏≠„ÄÇËøô‰∫õËµÑÊ∫êÂèØ‰ª•ÊòØËøõÁ®ãID„ÄÅ‰∏ªÊú∫Âêç„ÄÅÁî®Êà∑ID„ÄÅÊñá‰ª∂Âêç„ÄÅ‰∏éÁΩëÁªúËÆøÈóÆÁõ∏ÂÖ≥ÁöÑÂêçÁß∞ÂíåËøõÁ®ãÈó¥ÈÄö‰ø°„ÄÇ&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ÁâπÂæÅ&lt;/p>
&lt;p>ÂèØ‰ª•ÂÆûÁé∞Âú®Âêå‰∏Ä‰∏ªÊú∫Á≥ªÁªü‰∏≠ÂØπËøõÁ®ãID„ÄÅ‰∏ªÊú∫Âêç„ÄÅÁî®Êà∑ÂêçID„ÄÅÊñá‰ª∂Âêç„ÄÅÁΩëÁªúÂíåËøõÁ®ãÈó¥ÈÄö‰ø°Á≠âËµÑÊ∫êÁöÑÈöîÁ¶ª„ÄÇ&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Á±ªÂûã&lt;/p>
&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">namespace&lt;/th>
&lt;th style="text-align:center">summary&lt;/th>
&lt;th style="text-align:center">kernel&lt;/th>
&lt;th>describe&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">Mount(mnt)&lt;/td>
&lt;td style="text-align:center">ÈöîÁ¶ªÊåÇËΩΩÁÇπ&lt;/td>
&lt;td style="text-align:center">2.4.19&lt;/td>
&lt;td>ÈöîÁ¶ª‰∏çÂêåÁöÑËøõÁ®ãÊàñËøõÁ®ãÁªÑÁúãÂà∞ÁöÑÊåÇËΩΩÁÇπÔºåÂÆûÁé∞ÂÆπÂô®ÂÜÖÂè™ËÉΩÁúãÂà∞Ëá™Â∑±ÁöÑÊåÇÂú®‰ø°ÊÅØÔºåÂú®ÂÆπÂô®ÂÜÖÁöÑÊåÇËΩΩÊìç‰Ωú‰∏ç‰ºöÂΩ±Âìç‰∏ªÊú∫ÁöÑÊåÇËΩΩÁõÆÂΩï&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">Process ID(pid)&lt;/td>
&lt;td style="text-align:center">ÈöîÁ¶ªËøõÁ®ã ID&lt;/td>
&lt;td style="text-align:center">2.6.24&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">Network(net)&lt;/td>
&lt;td style="text-align:center">ÈöîÁ¶ªÁΩëÁªúËÆæÂ§áÔºåÁ´ØÂè£Âè∑Á≠â&lt;/td>
&lt;td style="text-align:center">2.6.29&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">Interprocess Communication(ipc)&lt;/td>
&lt;td style="text-align:center">ÈöîÁ¶ª System VIPC Âíå POSIX message queues&lt;/td>
&lt;td style="text-align:center">2.6.19&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">UTS Namespace(uts)&lt;/td>
&lt;td style="text-align:center">ÈöîÁ¶ª‰∏ªÊú∫ÂêçÂíåÂüüÂêç&lt;/td>
&lt;td style="text-align:center">2.6.19&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">User Namespace(user)&lt;/td>
&lt;td style="text-align:center">ÈöîÁ¶ªÁî®Êà∑ÂíåÁî®Êà∑ÁªÑ&lt;/td>
&lt;td style="text-align:center">3.8&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">Control group(cgroup) Namespce&lt;/td>
&lt;td style="text-align:center">ÈöîÁ¶ª Cgroups Ê†πÁõÆÂΩï&lt;/td>
&lt;td style="text-align:center">4.6&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">Time Namespace&lt;/td>
&lt;td style="text-align:center">ÈöîÁ¶ªÁ≥ªÁªüÊó∂Èó¥&lt;/td>
&lt;td style="text-align:center">5.6&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="mount-namespace">Mount Namespace&lt;/h3>
&lt;p>‰ΩøÁî® unshare ÂëΩ‰ª§ÂèØ‰ª•Êñ∞Âª∫ Mount NamespaceÔºåÂπ∂‰∏îÂú®Êñ∞Âª∫ÁöÑ Mount Namespace ÂÜÖ mount ÊòØÂíåÂ§ñÈÉ®ÂÆåÂÖ®ÈöîÁ¶ªÁöÑ„ÄÇ&lt;/p>
&lt;ul>
&lt;li>
&lt;p>ÂàõÂª∫‰∏Ä‰∏™bash ËøõÁ®ãÂπ∂‰∏îÊñ∞Âª∫‰∏Ä‰∏™ Mount Namespace&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>vagrant@localhost ~&lt;span class="o">]&lt;/span>$ sudo unshare --mount --fork /bin/bash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@localhost vagrant&lt;span class="o">]&lt;/span>&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>È™åËØÅÂú®Áã¨Á´ãÁöÑ namespce ÂÜÖÊåÇËΩΩÊñá‰ª∂Ôºå‰∏çÂΩ±ÂìçÂà´ÁöÑ&lt;/p>
&lt;p>Âú® /tmp ÁõÆÂΩï‰∏ãÂàõÂª∫‰∏Ä‰∏™ÁõÆÂΩï&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@localhost vagrant&lt;span class="o">]&lt;/span>&lt;span class="c1"># mkdir /tmp/tmpfs&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>‰ΩøÁî® mount ÂëΩ‰ª§ÊåÇËΩΩ‰∏Ä‰∏™ tmpfs Á±ªÂûãÁöÑÁõÆÂΩï&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@localhost vagrant&lt;span class="o">]&lt;/span>&lt;span class="c1"># mount -t tmpfs -o size=20m tmpfs /tmp/tmpfs&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>‰ΩøÁî® df ÂëΩ‰ª§Êü•ÁúãÂ∑≤ÁªèÊåÇËΩΩÁöÑÁõÆÂΩï‰ø°ÊÅØ&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@localhost vagrant&lt;span class="o">]&lt;/span>&lt;span class="c1"># df -h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Filesystem Size Used Avail Use% Mounted on
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/dev/sda1 40G 3.8G 37G 10% /
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devtmpfs 457M &lt;span class="m">0&lt;/span> 457M 0% /dev
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tmpfs 464M &lt;span class="m">0&lt;/span> 464M 0% /dev/shm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tmpfs 464M &lt;span class="m">0&lt;/span> 464M 0% /sys/fs/cgroup
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tmpfs 464M 13M 451M 3% /run
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tmpfs 93M &lt;span class="m">0&lt;/span> 93M 0% /run/user/1000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">//172.29.0.1/vgt-2469b42ebff188de622646551002b263-6ad5fdbcbf2eaa93bd62f92333a2e6e5 466G 171G 295G 37% /vagrant
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tmpfs 20M &lt;span class="m">0&lt;/span> 20M 0% /tmp/tmpfs
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Êñ∞ÊâìÂºÄ‰∏Ä‰∏™ÂëΩ‰ª§Á™óÂè£ÔºåÊâßË°å df ÂëΩ‰ª§Êü•Áúã‰∏ªÊú∫ÁöÑÊåÇËΩΩ‰ø°ÊÅØ&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>vagrant@localhost ~&lt;span class="o">]&lt;/span>$ df -h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Filesystem Size Used Avail Use% Mounted on
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devtmpfs 457M &lt;span class="m">0&lt;/span> 457M 0% /dev
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tmpfs 464M &lt;span class="m">0&lt;/span> 464M 0% /dev/shm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tmpfs 464M 13M 451M 3% /run
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tmpfs 464M &lt;span class="m">0&lt;/span> 464M 0% /sys/fs/cgroup
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/dev/sda1 40G 3.8G 37G 10% /
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">//172.29.0.1/vgt-2469b42ebff188de622646551002b263-6ad5fdbcbf2eaa93bd62f92333a2e6e5 466G 171G 295G 37% /vagrant
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tmpfs 93M &lt;span class="m">0&lt;/span> 93M 0% /run/user/1000
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Âü∫Êú¨È™åËØÅÂÆåÊØï„ÄÇÊé•ÁùÄÊàë‰ª¨Êü•ÁúãÊñ∞ÁöÑmount namespace ‰ø°ÊÅØ&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@localhost vagrant&lt;span class="o">]&lt;/span>&lt;span class="c1"># ls -l /proc/self/ns/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lrwxrwxrwx. &lt;span class="m">1&lt;/span> root root &lt;span class="m">0&lt;/span> Feb &lt;span class="m">26&lt;/span> 09:56 ipc -&amp;gt; ipc:&lt;span class="o">[&lt;/span>4026531839&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lrwxrwxrwx. &lt;span class="m">1&lt;/span> root root &lt;span class="m">0&lt;/span> Feb &lt;span class="m">26&lt;/span> 09:56 mnt -&amp;gt; mnt:&lt;span class="o">[&lt;/span>4026532117&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lrwxrwxrwx. &lt;span class="m">1&lt;/span> root root &lt;span class="m">0&lt;/span> Feb &lt;span class="m">26&lt;/span> 09:56 net -&amp;gt; net:&lt;span class="o">[&lt;/span>4026531956&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lrwxrwxrwx. &lt;span class="m">1&lt;/span> root root &lt;span class="m">0&lt;/span> Feb &lt;span class="m">26&lt;/span> 09:56 pid -&amp;gt; pid:&lt;span class="o">[&lt;/span>4026531836&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lrwxrwxrwx. &lt;span class="m">1&lt;/span> root root &lt;span class="m">0&lt;/span> Feb &lt;span class="m">26&lt;/span> 09:56 user -&amp;gt; user:&lt;span class="o">[&lt;/span>4026531837&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lrwxrwxrwx. &lt;span class="m">1&lt;/span> root root &lt;span class="m">0&lt;/span> Feb &lt;span class="m">26&lt;/span> 09:56 uts -&amp;gt; uts:&lt;span class="o">[&lt;/span>4026531838&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Êñ∞ÊâìÂºÄ‰∏Ä‰∏™ÂëΩ‰ª§Á™óÂè£Ôºå‰ΩøÁî®Áõ∏ÂêåÁöÑÂëΩ‰ª§Êü•Áúã‰∏ªÊú∫‰∏äÁöÑ namespace ‰ø°ÊÅØ&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>vagrant@localhost ~&lt;span class="o">]&lt;/span>$ ls -l /proc/self/ns/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lrwxrwxrwx. &lt;span class="m">1&lt;/span> vagrant vagrant &lt;span class="m">0&lt;/span> Feb &lt;span class="m">26&lt;/span> 09:57 ipc -&amp;gt; ipc:&lt;span class="o">[&lt;/span>4026531839&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lrwxrwxrwx. &lt;span class="m">1&lt;/span> vagrant vagrant &lt;span class="m">0&lt;/span> Feb &lt;span class="m">26&lt;/span> 09:57 mnt -&amp;gt; mnt:&lt;span class="o">[&lt;/span>4026531840&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lrwxrwxrwx. &lt;span class="m">1&lt;/span> vagrant vagrant &lt;span class="m">0&lt;/span> Feb &lt;span class="m">26&lt;/span> 09:57 net -&amp;gt; net:&lt;span class="o">[&lt;/span>4026531956&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lrwxrwxrwx. &lt;span class="m">1&lt;/span> vagrant vagrant &lt;span class="m">0&lt;/span> Feb &lt;span class="m">26&lt;/span> 09:57 pid -&amp;gt; pid:&lt;span class="o">[&lt;/span>4026531836&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lrwxrwxrwx. &lt;span class="m">1&lt;/span> vagrant vagrant &lt;span class="m">0&lt;/span> Feb &lt;span class="m">26&lt;/span> 09:57 user -&amp;gt; user:&lt;span class="o">[&lt;/span>4026531837&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lrwxrwxrwx. &lt;span class="m">1&lt;/span> vagrant vagrant &lt;span class="m">0&lt;/span> Feb &lt;span class="m">26&lt;/span> 09:57 uts -&amp;gt; uts:&lt;span class="o">[&lt;/span>4026531838&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="pid-namespace">PID Namespace&lt;/h3>
&lt;blockquote>
&lt;p>Áî®Êù•ÈöîÁ¶ªËøõÁ®ãÔºåÂú®‰∏çÂêåÁöÑnamespaceÂÜÖÂèØ‰ª•Êã•ÊúâÁõ∏ÂêåÁöÑËøõÁ®ãÂè∑&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>
&lt;p>ÂàõÂª∫‰∏Ä‰∏™ bash ËøõÁ®ãÔºåÂπ∂‰∏îÊñ∞Âª∫‰∏Ä‰∏™ PID Namespace&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>vagrant@localhost ~&lt;span class="o">]&lt;/span>$ sudo unshare --pid --fork --mount-proc /bin/bash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@localhost vagrant&lt;span class="o">]&lt;/span>&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Âú®ÂΩìÂâçÁöÑÂëΩ‰ª§Ë°åÁ™óÂè£‰ΩøÁî® ps aux ÂëΩ‰ª§Êü•ÁúãËøõÁ®ã‰ø°ÊÅØ&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@localhost vagrant&lt;span class="o">]&lt;/span>&lt;span class="c1"># ps aux&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">USER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMAND
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root &lt;span class="m">1&lt;/span> 0.0 0.2 &lt;span class="m">15792&lt;/span> &lt;span class="m">2616&lt;/span> pts/3 S 13:59 0:00 /bin/bash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root &lt;span class="m">16&lt;/span> 0.0 0.1 &lt;span class="m">55192&lt;/span> &lt;span class="m">1844&lt;/span> pts/3 R+ 14:02 0:00 ps aux
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="uts-namespace">UTS Namespace&lt;/h3>
&lt;blockquote>
&lt;p>ÂÆÉÂÖÅËÆ∏ÊØè‰∏™UTS Namespace Êã•Êúâ‰∏Ä‰∏™Áã¨Á´ãÁöÑ‰∏ªÊú∫Âêç&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>
&lt;p>‰ΩøÁî® unshare ÂëΩ‰ª§ÂàõÂª∫‰∏Ä‰∏™ UTS Namespace&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>vagrant@localhost ~&lt;span class="o">]&lt;/span>$ sudo unshare --uts --fork /bin/bash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@localhost vagrant&lt;span class="o">]&lt;/span>&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>‰ΩøÁî® hostname ÂëΩ‰ª§ËÆæÁΩÆ‰∏ªÊú∫&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@localhost vagrant&lt;span class="o">]&lt;/span>&lt;span class="c1"># hostname -b docker&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@localhost vagrant&lt;span class="o">]&lt;/span>&lt;span class="c1"># hostname&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Êñ∞ÊâìÂºÄ‰∏Ä‰∏™ÂëΩ‰ª§Ë°åÁ™óÂè£Ôºå‰ΩøÁî®Áõ∏ÂêåÁöÑÂëΩ‰ª§Êü•Áúã‰∏ªÊú∫ÁöÑhostname&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@localhost vagrant&lt;span class="o">]&lt;/span>&lt;span class="c1"># localhost&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="ipc-namespace">IPC Namespace&lt;/h3>
&lt;blockquote>
&lt;p>‰∏ªË¶ÅÁî®Êù•ÈöîÁ¶ªËøõÁ®ãÈó¥ÈÄö‰ø°ÁöÑ„ÄÇPID Namespace Âíå IPC Namespace‰∏ÄËµ∑‰ΩøÁî®ÂèØ‰ª•ÂÆûÁé∞Âêå‰∏Ä IPC Namespace ÂÜÖÁöÑËøõÁ®ãÂΩºÊ≠§ÂèØ‰ª•ÈÄö‰ø°Ôºå‰∏çÂêå IPC Namespace ÁöÑËøõÁ®ãÂç¥‰∏çËÉΩÈÄö‰ø°„ÄÇ&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>
&lt;p>‰ΩøÁî® unshare ÂëΩ‰ª§ÂàõÂª∫‰∏Ä‰∏™ IPC Namespace&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>vagrant@docker ~&lt;span class="o">]&lt;/span>$ sudo unshare --ipc --fork /bin/bash
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Âè¶Ëµ∑‰∏Ä‰∏™Á™óÂè£ÔºåÊü•ÁúãÁ≥ªÁªüÁöÑÈÄö‰ø°ËøõÁ®ã&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>vagrant@docker ~&lt;span class="o">]&lt;/span>$ ipcs -q
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">------ Message Queues --------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">key msqid owner perms used-bytes messages
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Âú®Êñ∞ÁöÑipc namespace‰∏ãÊñ∞Âª∫‰∏Ä‰∏™ËøõÁ®ãÈÄö‰ø°ÈòüÂàó&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@docker vagrant&lt;span class="o">]&lt;/span>&lt;span class="c1"># ipcmk -Q&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Message queue id: &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Êü•ÁúãÂΩìÂâçipc namespace ‰∏ãÁöÑÁ≥ªÁªüÈÄö‰ø°ÈòüÂàóÂàóË°®&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@docker vagrant&lt;span class="o">]&lt;/span>&lt;span class="c1"># ipcs -q&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">------ Message Queues --------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">key msqid owner perms used-bytes messages
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">0x2ae315e9 &lt;span class="m">0&lt;/span> root &lt;span class="m">644&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>ÂÜçÊ¨°Êü•Áúã‰∏ªÊú∫ÁöÑÁ≥ªÁªüÈÄö‰ø°ÈòüÂàó&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>vagrant@docker ~&lt;span class="o">]&lt;/span>$ ipcs -q
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">------ Message Queues --------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">key msqid owner perms used-bytes messages
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="user-namespace">User Namespace&lt;/h3>
&lt;blockquote>
&lt;p>‰∏ªË¶ÅÁî®Êù•ÈöîÁ¶ªÁî®Êà∑ÂíåÁî®Êà∑ÁªÑ„ÄÇÂèØ‰ª•ÂÆûÁé∞ËøõÁ®ãÂú®ÂÆπÂô®ÂÜÖÊã•Êúâ root ÊùÉÈôêÔºå ËÄåÂú®‰∏ªÊú∫‰∏äÂç¥Âè™ÊòØÊôÆÈÄöÁî®Êà∑„ÄÇ&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>
&lt;p>‰ª•ÊôÆÈÄöÁî®Êà∑ÁöÑË∫´‰ªΩÂàõÂª∫‰∏Ä‰∏™ User Namespace&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>vagrant@docker ~&lt;span class="o">]&lt;/span>$ unshare --user --fork /bin/bash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">unshare: unshare failed: Invalid argument
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Êü•ÁúãÂÜÖÊ†∏ÁâàÊú¨&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>vagrant@docker ~&lt;span class="o">]&lt;/span>$ uname -a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Linux docker 3.10.0-1127.el7.x86_64 &lt;span class="c1">#1 SMP Tue Mar 31 23:36:51 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Êü•ÈòÖËµÑÊñô&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># max_user_namespacesÊñá‰ª∂ËÆ∞ÂΩï‰∫ÜÂÖÅËÆ∏ÂàõÂª∫ÁöÑuser namespaceÊï∞ÈáèÔºåÊàëÁöÑCentOS 7.5ÈªòËÆ§ÊòØ0Ôºå‰øÆÊîπ‰πã&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="m">2147483647&lt;/span> &amp;gt; /proc/sys/user/max_user_namespaces
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ÂÜçÊ¨°ËøêË°å&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>vagrant@docker ~&lt;span class="o">]&lt;/span>$ unshare --user -r /bin/bash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@docker ~&lt;span class="o">]&lt;/span>&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>ÊâßË°å id ÂëΩ‰ª§Êü•ÁúãÂΩìÂâçÁöÑÁî®Êà∑‰ø°ÊÅØ&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@docker ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">uid&lt;/span>&lt;span class="o">=&lt;/span>0&lt;span class="o">(&lt;/span>root&lt;span class="o">)&lt;/span> &lt;span class="nv">gid&lt;/span>&lt;span class="o">=&lt;/span>0&lt;span class="o">(&lt;/span>root&lt;span class="o">)&lt;/span> &lt;span class="nv">groups&lt;/span>&lt;span class="o">=&lt;/span>0&lt;span class="o">(&lt;/span>root&lt;span class="o">)&lt;/span>,65534&lt;span class="o">(&lt;/span>nfsnobody&lt;span class="o">)&lt;/span> &lt;span class="nv">context&lt;/span>&lt;span class="o">=&lt;/span>unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Âú®ÂΩìÂâçÁ™óÂè£ÊâßË°å reboot ÂëΩ‰ª§&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@docker ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># reboot&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Failed to open /dev/initctl: Permission denied
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Failed to talk to init daemon.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="net-namespace">Net Namespace&lt;/h3>
&lt;blockquote>
&lt;p>Áî®Êù•ÈöîÁ¶ªÁΩëÁªúËÆæÂ§á„ÄÅIPÂú∞ÂùÄÂíåÁ´ØÂè£Á≠â‰ø°ÊÅØ„ÄÇ&lt;/p>
&lt;p>ÂèØ‰ª•ËÆ©ÊØè‰∏™ËøõÁ®ãÊã•ÊúâËá™Â∑±Áã¨Á´ãÁöÑIPÂú∞ÂùÄÔºåÁ´ØÂè£ÂíåÁΩëÂç°‰ø°ÊÅØ&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>
&lt;p>È¶ñÂÖàÊü•Áúã‰∏ªÊú∫‰∏äÁöÑip ‰ø°ÊÅØ&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>vagrant@docker ~&lt;span class="o">]&lt;/span>$ ip a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1: lo: &amp;lt;LOOPBACK,UP,LOWER_UP&amp;gt; mtu &lt;span class="m">65536&lt;/span> qdisc noqueue state UNKNOWN group default qlen &lt;span class="m">1000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> inet 127.0.0.1/8 scope host lo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> valid_lft forever preferred_lft forever
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> inet6 ::1/128 scope host
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> valid_lft forever preferred_lft forever
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2: eth0: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu &lt;span class="m">1500&lt;/span> qdisc mq state UP group default qlen &lt;span class="m">1000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> link/ether 00:15:5d:25:01:09 brd ff:ff:ff:ff:ff:ff
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> inet 172.29.5.132/20 brd 172.29.15.255 scope global noprefixroute dynamic eth0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> valid_lft 82979sec preferred_lft 82979sec
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> inet6 fe80::215:5dff:fe25:109/64 scope link
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> valid_lft forever preferred_lft forever
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">3: docker0: &amp;lt;NO-CARRIER,BROADCAST,MULTICAST,UP&amp;gt; mtu &lt;span class="m">1500&lt;/span> qdisc noqueue state DOWN group default
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> link/ether 02:42:f0:82:11:e0 brd ff:ff:ff:ff:ff:ff
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> valid_lft forever preferred_lft forever
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>ÂàõÂª∫ net namespace&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>vagrant@docker ~&lt;span class="o">]&lt;/span>$ sudo unshare --net --fork /bin/bash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@docker vagrant&lt;span class="o">]&lt;/span>&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>‰ΩøÁî® ip aÂëΩ‰ª§Êü•ÁúãÂΩìÂâçnamespaceÁöÑÁΩëÁªú‰ø°ÊÅØ&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@docker vagrant&lt;span class="o">]&lt;/span>&lt;span class="c1"># ip a&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1: lo: &amp;lt;LOOPBACK&amp;gt; mtu &lt;span class="m">65536&lt;/span> qdisc noop state DOWN group default qlen &lt;span class="m">1000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="‰∏∫‰ªÄ‰πà-docker-ÈúÄË¶Å-namespace">‰∏∫‰ªÄ‰πà docker ÈúÄË¶Å namespace?&lt;/h3>
&lt;p>Linux ÂÜÖÊ†∏‰ªé2002Âπ¥2.4.19ÁâàÊú¨ÂºÄÂßãÂä†ÂÖ•‰∫Ü Mount Namspace&lt;/p>
&lt;p>ÂÜÖÊ†∏3.8ÁâàÊú¨Âä†ÂÖ•‰∫Ü User Namespace ‰∏∫ÂÆπÂô®Êèê‰æõ‰∫ÜË∂≥Â§üÁöÑÊîØÊåÅÂäüËÉΩ&lt;/p>
&lt;p>ÂΩì docker Êñ∞Âª∫‰∏Ä‰∏™ÂÆπÂô®Êó∂&lt;/p>
&lt;p>‰ºöÂàõÂª∫ËøôÂÖ≠Áßç namespaceÔºå ÁÑ∂ÂêéÂ∞ÜÂÆπÂô®‰∏≠ÁöÑËøõÁ®ãÂä†ÂÖ•Ëøô‰∫õ namespace‰πã‰∏≠&lt;/p>
&lt;h1 id="cgroups">Cgroups&lt;/h1>
&lt;ul>
&lt;li>
&lt;p>ÂÆö‰πâ&lt;/p>
&lt;p>ÂÖ®Á®ãÊòØ control groupsÔºå ÊòØLinux ÂÜÖÊ†∏ÁöÑ‰∏Ä‰∏™ÂäüËÉΩ„ÄÇÂèØ‰ª•ÂÆûÁé∞ÈôêÂà∂ËøõÁ®ãÊàñËÄÖËøõÁ®ãÁªÑÁöÑËµÑÊ∫êÔºàcpu„ÄÅmem„ÄÅÁ£ÅÁõòIOÁ≠âÔºâ&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ÁâπÂæÅ&lt;/p>
&lt;p>ËµÑÊ∫êÈôêÂà∂ÔºöÈôêÂà∂ËµÑÊ∫êÁöÑ‰ΩøÁî®Èáè&lt;/p>
&lt;p>‰ºòÂÖàÁ∫ßÊéßÂà∂Ôºö ‰∏çÂêåÁöÑÁªÑÂèØ‰ª•Êúâ‰∏çÁî®ÁöÑËµÑÊ∫ê‰ΩøÁî®‰ºòÂÖàÁ∫ß&lt;/p>
&lt;p>ÂÆ°ËÆ°ÔºöËÆ°ÁÆóÊéßÂà∂ÁªÑÁöÑËµÑÊ∫ê‰ΩøÁî®ÊÉÖÂÜµ&lt;/p>
&lt;p>ÊéßÂà∂Ôºö ÊéßÂà∂ËøõÁ®ãÁöÑÊåÇËµ∑ÊàñÊÅ¢Â§ç&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Ê†∏ÂøÉ&lt;/p>
&lt;p>subsystem: ‰∏Ä‰∏™ÂÜÖÊ†∏ÁöÑÁªÑ‰ª∂Ôºå‰ª£Ë°®‰∏ÄÁ±ªËµÑÊ∫êË∞ÉÂ∫¶ÊéßÂà∂Âô®&lt;/p>
&lt;p>cgroupÔºö Ë°®Á§∫‰∏ÄÁªÑËøõÁ®ãÂíå‰∏ÄÁªÑÂ∏¶ÊúâÂèÇÊï∞ÁöÑÂ≠êÁ≥ªÁªüÁöÑÂÖ≥ËÅîÂÖ≥Á≥ª&lt;/p>
&lt;p>hierarchyÔºöÁî±‰∏Ä‰∫õÂàóÁöÑÊéßÂà∂ÁªÑÊåâÁÖßÊ†ëÁä∂ÁªìÊûÑÊéíÂàóÁªÑÊàêÁöÑÂ≠êÊéßÂà∂ÁªÑÈªòËÆ§Êã•ÊúâÁà∂ÊéßÂà∂ÁªÑÁöÑÂ±ûÊÄß&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="subsystem">subsystem&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Êü•ÁúãÂΩìÂâç‰∏ªÊú∫‰ΩøÁî®‰∫ÜÂì™‰∫õÂ≠êÁ≥ªÁªü&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>vagrant@docker ~&lt;span class="o">]&lt;/span>$ sudo mount -t cgroup
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cgroup on /sys/fs/cgroup/systemd &lt;span class="nb">type&lt;/span> cgroup &lt;span class="o">(&lt;/span>rw,nosuid,nodev,noexec,relatime,seclabel,xattr,release_agent&lt;span class="o">=&lt;/span>/usr/lib/systemd/systemd-cgroups-agent,name&lt;span class="o">=&lt;/span>systemd&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cgroup on /sys/fs/cgroup/cpuset &lt;span class="nb">type&lt;/span> cgroup &lt;span class="o">(&lt;/span>rw,nosuid,nodev,noexec,relatime,seclabel,cpuset&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cgroup on /sys/fs/cgroup/cpu,cpuacct &lt;span class="nb">type&lt;/span> cgroup &lt;span class="o">(&lt;/span>rw,nosuid,nodev,noexec,relatime,seclabel,cpuacct,cpu&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cgroup on /sys/fs/cgroup/perf_event &lt;span class="nb">type&lt;/span> cgroup &lt;span class="o">(&lt;/span>rw,nosuid,nodev,noexec,relatime,seclabel,perf_event&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cgroup on /sys/fs/cgroup/blkio &lt;span class="nb">type&lt;/span> cgroup &lt;span class="o">(&lt;/span>rw,nosuid,nodev,noexec,relatime,seclabel,blkio&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cgroup on /sys/fs/cgroup/memory &lt;span class="nb">type&lt;/span> cgroup &lt;span class="o">(&lt;/span>rw,nosuid,nodev,noexec,relatime,seclabel,memory&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cgroup on /sys/fs/cgroup/hugetlb &lt;span class="nb">type&lt;/span> cgroup &lt;span class="o">(&lt;/span>rw,nosuid,nodev,noexec,relatime,seclabel,hugetlb&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cgroup on /sys/fs/cgroup/freezer &lt;span class="nb">type&lt;/span> cgroup &lt;span class="o">(&lt;/span>rw,nosuid,nodev,noexec,relatime,seclabel,freezer&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cgroup on /sys/fs/cgroup/net_cls,net_prio &lt;span class="nb">type&lt;/span> cgroup &lt;span class="o">(&lt;/span>rw,nosuid,nodev,noexec,relatime,seclabel,net_prio,net_cls&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cgroup on /sys/fs/cgroup/devices &lt;span class="nb">type&lt;/span> cgroup &lt;span class="o">(&lt;/span>rw,nosuid,nodev,noexec,relatime,seclabel,devices&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cgroup on /sys/fs/cgroup/pids &lt;span class="nb">type&lt;/span> cgroup &lt;span class="o">(&lt;/span>rw,nosuid,nodev,noexec,relatime,seclabel,pids&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>‰ª• cpu Â≠êÁ≥ªÁªü‰∏∫‰æãÔºåÊºîÁ§∫ cgroups Â¶Ç‰ΩïÈôêÂà∂ËøõÁ®ãÁöÑ cpu‰ΩøÁî®Êó∂Èó¥&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#Âú®cpuÂ≠êÁ≥ªÁªü‰∏ãÂàõÂª∫ÊµãËØïÊñá‰ª∂Â§π&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir /sys/fs/cgroup/cpu/mydocker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#Êü•Áúã&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@docker vagrant&lt;span class="o">]&lt;/span>&lt;span class="c1"># ls /sys/fs/cgroup/cpu/mydocker -l&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--. &lt;span class="m">1&lt;/span> root root &lt;span class="m">0&lt;/span> Feb &lt;span class="m">26&lt;/span> 15:15 cgroup.clone_children
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--w--w--w-. &lt;span class="m">1&lt;/span> root root &lt;span class="m">0&lt;/span> Feb &lt;span class="m">26&lt;/span> 15:15 cgroup.event_control
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--. &lt;span class="m">1&lt;/span> root root &lt;span class="m">0&lt;/span> Feb &lt;span class="m">26&lt;/span> 15:15 cgroup.procs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-r--r--r--. &lt;span class="m">1&lt;/span> root root &lt;span class="m">0&lt;/span> Feb &lt;span class="m">26&lt;/span> 15:15 cpuacct.stat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--. &lt;span class="m">1&lt;/span> root root &lt;span class="m">0&lt;/span> Feb &lt;span class="m">26&lt;/span> 15:15 cpuacct.usage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-r--r--r--. &lt;span class="m">1&lt;/span> root root &lt;span class="m">0&lt;/span> Feb &lt;span class="m">26&lt;/span> 15:15 cpuacct.usage_percpu
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--. &lt;span class="m">1&lt;/span> root root &lt;span class="m">0&lt;/span> Feb &lt;span class="m">26&lt;/span> 15:15 cpu.cfs_period_us
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--. &lt;span class="m">1&lt;/span> root root &lt;span class="m">0&lt;/span> Feb &lt;span class="m">26&lt;/span> 15:15 cpu.cfs_quota_us
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--. &lt;span class="m">1&lt;/span> root root &lt;span class="m">0&lt;/span> Feb &lt;span class="m">26&lt;/span> 15:15 cpu.rt_period_us
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--. &lt;span class="m">1&lt;/span> root root &lt;span class="m">0&lt;/span> Feb &lt;span class="m">26&lt;/span> 15:15 cpu.rt_runtime_us
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--. &lt;span class="m">1&lt;/span> root root &lt;span class="m">0&lt;/span> Feb &lt;span class="m">26&lt;/span> 15:15 cpu.shares
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-r--r--r--. &lt;span class="m">1&lt;/span> root root &lt;span class="m">0&lt;/span> Feb &lt;span class="m">26&lt;/span> 15:15 cpu.stat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--. &lt;span class="m">1&lt;/span> root root &lt;span class="m">0&lt;/span> Feb &lt;span class="m">26&lt;/span> 15:15 notify_on_release
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--. &lt;span class="m">1&lt;/span> root root &lt;span class="m">0&lt;/span> Feb &lt;span class="m">26&lt;/span> 15:15 tasks
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Â∞ÜÂΩìÂâçshellËøõÁ®ãÂä†ÂÖ•cgroup&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@docker mydocker&lt;span class="o">]&lt;/span>&lt;span class="c1"># echo $$&amp;gt; tasks&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Êü•ÁúãtasksÊñá‰ª∂ÂÜÖÂÆπ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@docker mydocker&lt;span class="o">]&lt;/span>&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>mem&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Âú®memoryÂ≠êÁ≥ªÁªü‰∏ãÂàõÂª∫cgroup&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@docker mydocker&lt;span class="o">]&lt;/span>&lt;span class="c1"># mkdir /sys/fs/cgroup/memory/mydocker&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Êü•ÁúãÊñ∞Âª∫ÁõÆÂΩï‰∏≠ÁöÑÂÜÖÂÆπ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@docker mydocker&lt;span class="o">]&lt;/span>&lt;span class="c1"># ls&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cgroup.clone_children
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cgroup.event_control
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cgroup.procs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">memory.failcnt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">memory.force_empty
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">memory.kmem.failcnt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">memory.kmem.limit_in_bytes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">memory.kmem.max_usage_in_bytes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">memory.kmem.slabinfo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">memory.kmem.tcp.failcnt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">memory.kmem.tcp.limit_in_bytes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">memory.kmem.tcp.max_usage_in_bytes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">memory.kmem.tcp.usage_in_bytes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">memory.kmem.usage_in_bytes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">memory.limit_in_bytes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">memory.max_usage_in_bytes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">memory.memsw.failcnt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">memory.memsw.limit_in_bytes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">memory.memsw.max_usage_in_bytes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">memory.memsw.usage_in_bytes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">memory.move_charge_at_immigrate
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">memory.numa_stat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">memory.oom_control
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">memory.pressure_level
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">memory.soft_limit_in_bytes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">memory.stat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">memory.swappiness
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">memory.usage_in_bytes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">memory.use_hierarchy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">notify_on_release
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tasks
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ÈôêÂà∂ÂÜÖÂ≠ò‰ΩøÁî®&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@docker mydocker&lt;span class="o">]&lt;/span>&lt;span class="c1"># echo 1073741824 &amp;gt; memory.limit_in_bytes&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Â∞ÜÂΩìÂâçshellÂÜôÂÖ•tasksÂÜÖ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@docker mydocker&lt;span class="o">]&lt;/span>&lt;span class="c1"># echo $$&amp;gt;tasks&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@docker mydocker&lt;span class="o">]&lt;/span>&lt;span class="c1"># cat tasks&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">3356&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">3484&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Áî≥ËØ∑ÂÜÖÂ≠òÔºåÂΩìËææÂà∞1GÊó∂ Ë¢´ÊùÄÊ≠ª&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@docker mydocker&lt;span class="o">]&lt;/span>&lt;span class="c1"># memtester 1500M 1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">memtester version 4.3.0 &lt;span class="o">(&lt;/span>64-bit&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Copyright &lt;span class="o">(&lt;/span>C&lt;span class="o">)&lt;/span> 2001-2012 Charles Cazabon.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Licensed under the GNU General Public License version &lt;span class="m">2&lt;/span> &lt;span class="o">(&lt;/span>only&lt;span class="o">)&lt;/span>.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pagesize is &lt;span class="m">4096&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pagesizemask is 0xfffffffffffff000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">want 1500MB &lt;span class="o">(&lt;/span>&lt;span class="m">1572864000&lt;/span> bytes&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">got 1500MB &lt;span class="o">(&lt;/span>&lt;span class="m">1572864000&lt;/span> bytes&lt;span class="o">)&lt;/span>, trying mlock ...Killed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ‰øÆÊîπÁî≥ËØ∑Â§ßÂ∞èÔºåÂÆåÁæé&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@docker mydocker&lt;span class="o">]&lt;/span>&lt;span class="c1"># memtester 500M 1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">memtester version 4.3.0 &lt;span class="o">(&lt;/span>64-bit&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Copyright &lt;span class="o">(&lt;/span>C&lt;span class="o">)&lt;/span> 2001-2012 Charles Cazabon.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Licensed under the GNU General Public License version &lt;span class="m">2&lt;/span> &lt;span class="o">(&lt;/span>only&lt;span class="o">)&lt;/span>.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pagesize is &lt;span class="m">4096&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pagesizemask is 0xfffffffffffff000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">want 500MB &lt;span class="o">(&lt;/span>&lt;span class="m">524288000&lt;/span> bytes&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">got 500MB &lt;span class="o">(&lt;/span>&lt;span class="m">524288000&lt;/span> bytes&lt;span class="o">)&lt;/span>, trying mlock ...locked.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Loop 1/1:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Stuck Address : ok
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Random Value : ok
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Compare XOR : ok
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Compare SUB : ok
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Compare MUL : ok
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Compare DIV : ok
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Compare OR : ok
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Compare AND : ok
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Sequential Increment: ok
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Solid Bits : ok
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Block Sequential : ok
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Checkerboard : ok
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Bit Spread : ok
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>docker ÊòØÂ¶Ç‰Ωï‰ΩøÁî®cgroupsÁöÑÔºü&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">docker run -ti -m&lt;span class="o">=&lt;/span>1g nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul></description></item></channel></rss>